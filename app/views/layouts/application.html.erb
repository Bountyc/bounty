<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
	<meta name="description" content="Post a hard coding problem with a monetary incentive. Solve a coding problem for money">
  <meta name="keywords" content="coding, development, problems, how do i, get money, freelance jobs, programming jobs, html, javascript, python, ruby on rails">
  <meta name="title" content="Bounty Coding">
	<meta name="author" content="">
	<link rel="icon" href="../../favicon.ico">
  	<title>Bountyc</title>
  <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-glyphicons.css">
	<%= javascript_include_tag 'application', 'showdown' => true, 'data-turbolinks-track' => true %>
	<%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track' => true %>
	<%= csrf_meta_tags %>

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-71264384-1', 'auto');
  ga('send', 'pageview');

</script>
  
</head>
<body>

<%= render "layouts/notice" %>
<% if user_signed_in? %>
  <%= render "layouts/header" %>
    <script type="text/javascript">
    var pusher = new Pusher("<%= PUSHER_KEY %>");
    var userChannel = pusher.subscribe("private-user-<%= current_user.id %>");
    userChannel.bind('new-notification', function(message) {
      var count_notifications = parseInt($("#notifications-count").text())+1;
      $("#notifications-count").html(count_notifications);
      if (!$("#notifications-count").is(":visible"))
      {
        $("#notifications-count").show("slow")
      }
      $("#notifications").prepend(message);
    });
    $(document).ready(function() {
      $( "#dLabel" ).click(function() {
        // make ajax request to server to notify that notifications where viewed
        $.ajax({
          type: "POST",
          url: '<%= see_notifications_path %>',
          data: { _method:'PUT' },
          success: function(msg) {
            $( "#notifications-count" ).hide();
            // reset notifications count
            $("#notifications-count").html("0")
          }
        });

      });
    });
    </script>
<% else %>
  <%= render "layouts/logged_out_header" %>
<% end %>
<%= yield %>

<%= javascript_include_tag 'bootstrap.min', 'data-turbolinks-track' => true %>

</body>
</html>
